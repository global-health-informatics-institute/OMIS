<h4 class="mb-4">Purchase Request</h4>

<%= form_with model: @requisition, url: create_purchase_request_path, local: true do |form| %>
  <div class="mb-4">
    <span class="badge rounded-pill bg-warning text-dark px-3 py-2 fs-6">
      Pending Submission
    </span>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <div class="row mb-3">
        <div class="col-md-6">
          <%= form.label :initiated_on, "Date", class: "form-label" %>
          <%= form.date_field :initiated_on, value: Date.today, class: 'form-control', required: true %>
        </div>

        <div class="col-md-6">
          <%= form.label :initiated_by, class: "form-label" %>
          <%= form.text_field :initiated_by, value: current_user.full_name, class: 'form-control', required: true %>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <%= form.label :purpose, class: "form-label" %>
          <%= form.text_field :purpose, class: 'form-control', placeholder: "Enter the purpose of this purchase", required: true %>
        </div>

        <div class="col-md-6">
           <%= form.label :stakeholder_id, "Donor" %>
           <%= form.select :stakeholder_id, options_for_select(@stakeholder_options),
            { prompt: "Select Donor" }, class: "form-select" %>
        </div>

      </div>

      <div class="row mb-3">
        <div class="col-md-6">
              <%= form.label :department_id, "Department", class: "form-label" %>
              <%= form.select :department_id,
                   options_for_select(@department_options, @selected_department&.id),
                   { prompt: @selected_department&.department_name || "Select Department" },
                    class: "form-select",
                    required: true %>
        </div>


        <div class="col-md-6">
          <%= form.label :quantity, class: "form-label" %>
          <%= form.number_field :quantity, step: 1, min: 1, class: 'form-control', placeholder: "Enter quantity", required: true %>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <%= form.label :item_description, class: "form-label" %>
          <%= form.text_area :item_description, class: 'form-control', rows: 3, placeholder: "Enter item description", required: true %>
        </div>

        <div class="col-md-6">
          <%# You can add another field or leave this side blank %>
        </div>
      </div>

      <%= form.hidden_field :requisition_type, value: "Purchase Request" %>
      <%= form.hidden_field :workflow_state_id, value: params[:workflow_state_id] %>

      <div class="row">
        <div class="col-md-6">
          <%= form.submit "Submit Request", class: "btn btn-success me-2" %>
          <%= button_tag "Reset", type: "reset", class: "btn btn-secondary" %>
        </div>
      </div>
    </div>
  </div>
<% end %>
