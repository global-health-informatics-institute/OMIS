<%= form_with url: employees_path,  method: :post , local: false do |form| %>

  <p class="h5 ">New Employee Form</p>
  <!-- Progress Bar -->
  <div class="progress mb-3">
    <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
  </div>


  <div class="card w-100">
    <div class="card">
        <div class="card-header card-header-dark">
          <nav>
            <div class="nav nav-tabs " id="nav-tab" role="tablist">
              <button class="nav-link active" id="nav-personal-demographics-tab" data-bs-toggle="tab" data-bs-target="#nav-personal-demographics" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">1. Personal Demographics</button>
              <button class="nav-link" id="nav-employment-details-tab" data-bs-toggle="tab" data-bs-target="#nav-employment-details" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">2. Employment Details</button>
              <button class="nav-link" id="nav-level-effort-tab" data-bs-toggle="tab" data-bs-target="#nav-level-effort" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">3. Levels of Effort</button>
              <button class="nav-link" id="nav-supervision-tab" data-bs-toggle="tab" data-bs-target="#nav-supervision" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">4. Supervision</button>
              <button class="nav-link" id="nav-summary-tab" data-bs-toggle="tab" data-bs-target="#nav-summary" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">5. Summary</button>
            </div>
          </nav>
        </div>

        <hr>


        <div class="card-body">
          <div class="tab-content" id="nav-tabContent">

            <%# personal demographics %>
            <div class="tab-pane active" id="nav-personal-demographics" role="tabpanel" aria-labelledby="nav-personal-demographics-tab">
              <div class="row">
                <div class="col-4">
                  <%= form.label :first_name, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[first_name]', class: "form-control required-field", placeholder: 'Enter first name' %>
                </div>
                <div class="col">
                  <%= form.label :middle_name, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[middle_name]', class: "form-control", placeholder: 'Enter middle name' %>
                </div>
                <div class="col-4">
                  <%= form.label :last_name, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[last_name]', class: "form-control required-field", placeholder: 'Enter last name' %>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-4">
                  <%= form.label :birth_date, style: "display: block", class: "form-label" %>
                  <%= form.date_field 'person[birth_date]', class: "form-control required-field", placeholder: 'Enter last name' %>
                </div>
                <div class="col-4">
                  <%= form.label :gender, style: "display: block", class: "form-label" %>
                  <%= form.select('person[gender]', gender_options, { include_blank: "Select gender"}, { :class => 'form-select', required: true  }) %>
                </div>
                <div class="col-4">
                  <%= form.label :marital_status, style: "display: block", class: "form-label" %>
                  <%= form.select('person[marital_status]', marital_options, { include_blank: "Select marital status"}, { :class => 'form-select', required: true }) %>
                </div>

              </div>
              <hr/>
              <div class="row mt-3">
                <div class="col-3">
                  <%= form.label :primary_phone, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[primary_phone]', class: "form-control required-field", placeholder: 'Enter primary phone no.' %>
                </div>
                <div class="col-3">
                  <%= form.label :alt_phone, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[alt_phone]', class: "form-control", placeholder: 'Enter alternative phone no.' %>
                </div>
                <div class="col">
                  <%= form.label :email_address, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[email_address]', class: "form-control required-field", placeholder: 'Enter personal email ' %>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col">
                  <%= form.label :postal_address, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[postal_address]', class: "form-control required-field", placeholder: 'Enter postal address' %>
                </div>
                <div class="col">
                  <%= form.label :official_email, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[official_email]', class: "form-control required-field", placeholder: 'Enter official email' %>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col">
                  <%= form.label :residential_address, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[residential_address]', class: "form-control required-field", placeholder: 'Enter residential address' %>
                </div>
                <div class="col">
                  <%= form.label :landmark, style: "display: block", class: "form-label" %>
                  <%= form.text_field 'person[landmark]', class: "form-control required-field", placeholder: 'Enter landmark' %>
                </div>
              </div>

              <button type="button" class="btn btn-primary mt-3" onclick="buttonNavigate(1, 'next')">Next</button>

            </div>


            <!--2. Employement Details-->
            <div class="tab-pane" id="nav-employment-details" role="tabpanel" aria-labelledby="nav-employment-details-tab">
              <div class="row">
                <div class="row">
                  <div class="col-4">
                    <%= form.label :employment_date, style: "display: block", class: "form-label" %>
                    <%= form.date_field 'employee[employment_date]', class: "form-control required-field", placeholder: 'Enter employees employment date' %>
                  </div>
                  <div class="col">
                    <%= form.label :designated_role, style: "display: block", class: "form-label" %>
                    <%= form.select('employee[designated_role]', roles,  { include_blank: "Select role/position"}, { :class => 'form-select required-field', required: true }) %>
                  </div>
                  <div class="col-4">
                    <%= form.label :designation_start_date, style: "display: block", class: "form-label" %>
                    <%= form.date_field 'employee[designation_start_date]', class: "form-control required-field" %>
                  </div>
                  <div class="row mt-3">
                    <div class="col-4">
                      <%= form.label :branch, style: "display: block", class: "form-label" %>
                      <%= form.select('employee[branch]', branches, { include_blank: "Select branch"}, { :class => 'form-select required-field', required: true }) %>
                    </div>
                    <div class="col">
                      <%= form.label :departments, style: "display: block", class: "form-label" %>
                      <%= form.select('employee[departments]', departments, { include_blank: "Select department"}, { :class => 'form-select required-field', required: true }) %>
                    </div>
                  </div>
                </div>
              </div>
              <button type="button" class="btn btn-secondary mt-3" onclick="buttonNavigate(2, 'previous')">Previous</button>
              <button type="button" class="btn btn-primary mt-3" onclick="buttonNavigate(2, 'next')">Next</button>
            </div>


            <!--3. Level of Effort-->


            <%# LOE2 %>
            <%# container for available projects %>
              <select id="projectList" hidden>
                <option value="">Select project</option>
                <% projects.each do |project| %>
                  <option value="<%= project %>"><%= project %></option>
                <% end %>
              </select>

              <div class="tab-pane" id="nav-level-effort" role="tabpanel" aria-labelledby="nav-level-effort-tab">
                <div id="dynamicForm">

                  <div id="form-rows">
                    <div class="row mt-3">
                      <div class="col-4">
                        <%= label_tag 'projects', "Project", class: "form-label" %>
                        <%puts projects.inspect%>
                        <%= form.select('projects[][project]', projects,{ include_blank: "Select project"}, {class: 'form-control required-field', required: true}) %>
                      </div>
                      <div class="col-4">
                        <%= label_tag "allocated_effort", "Allocated Effort", class: "form-label" %>
                        <%= number_field_tag "projects[][allocated_effort]", nil, step:25, max: 100, min: 25, class: 'form-control required-field', required: true %>
                      </div>
                    </div>
                  </div>


                  <button type="button" class="btn btn-secondary mt-3" onclick="buttonNavigate(3, 'previous')">Previous</button>
                  <button type="button" id="submit-button" class="btn btn-primary mt-3" onclick="buttonNavigate(3, 'next')">Next</button>
                  <button type="button" class="btn btn-warning mt-3" id="total-effort-display" disabled>0%</button>
                </div>  
              </div>


            <!--Supervision-->
            <div class="tab-pane" id="nav-supervision" role="tabpanel" aria-labelledby="nav-supervision-tab">
              <div class="row">
                <div class="col-4">
                  <%= form.label :supervisor, style: "display: block", class: "form-label" %>
                  <%= form.select('supervision[supervisor]', supervisors, { include_blank: "Select supervisor"}, { :class => 'form-select required-field', required: true }) %>
                </div>
                <div class="col-4">
                  <%= form.label :started_on, style: "display: block", class: "form-label" %>
                  <%= form.date_field 'supervision[started_on]', class: "form-control required-field" %>
                </div>
              </div>
              <hr/>


              <button type="button" class="btn btn-secondary mt-3" onclick="buttonNavigate(4, 'previous')">Previous</button>
              <button type="button" class="btn btn-primary mt-3" onclick="buttonNavigate(4, 'next')">Next</button>
            </div>

            <%# summary %>
            <div class="tab-pane" id="nav-summary" role="tabpanel" aria-labelledby="nav-summary-tab" style="padding: 0; margin:0">
              <%= render 'employees/summary'%>              
              <button type="button" class="btn btn-secondary mt-3" onclick="buttonNavigate(5, 'previous')">Previous</button>
              <%= form.submit "Submit", class: "btn btn-success btn-block mt-3" %>
            </div>
            
          </div>
        </div>
    </div>
  </div>
<% end %>
<%= render 'employees/scripts'%>
